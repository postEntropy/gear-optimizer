import{w as G,x as J,o as K,F as V,O as v,r as X,j as e,L as Y,H as Z,B as _,t as E,M as I,Q as O,v as D}from"./index-DBS8pbof.js";import{r as Q}from"./createSvgIcon-DlsUWvU0.js";import{n as $,G as S,t as M,T as ee,k as z,l as n,j as se,d as N}from"./util-CWYRFuDd.js";import{M as te}from"./ModifierForm-BfFZFRvm.js";import{T as y,S as ae}from"./TextField-2xv4FU3H.js";import{F as ne,C as re}from"./SaveForm-CSoxvA8o.js";import{T as ie}from"./TableHead-Bnsy9pD0.js";import{T as C}from"./TableSortLabel-BW5zzkkU.js";import"./Stack-BFE22zhZ.js";var R={},W;function le(){if(W)return R;W=1;var H=G();Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var s=H(Q()),t=J();return R.default=(0,s.default)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),R}var he=le();const ce=K(he);var F={},U;function oe(){if(U)return F;U=1;var H=G();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var s=H(Q()),t=J();return F.default=(0,s.default)((0,t.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove"),F}var de=oe();const ue=K(de);class pe{constructor(s){this.hackstats=s.hackstats,this.state=s}speed(){let s=this.hackstats.hackspeed;return s*=$(this.hackstats,this.state,V.HACK,{rBetaPot:2,rDeltaPot:3}),s}bonus(s,t){const a=v[t];return(s*a[2]+100)*a[3]**this.milestones(s,t)}milestones(s,t){const a=v[t],i=this.hackstats.hacks[t].reducer;return Math.floor(s/(a[4]-i))}milestoneLevel(s,t){const a=v[t],i=this.hackstats.hacks[t].reducer;return Math.floor(s/(a[4]-i))*(a[4]-i)}reachable(s,t,a){const i=this.hackstats.rcap,c=this.hackstats.rpow;let o=this.speed(),h=t*60*50;const k=v[a][1];let l=1;for(a===13&&(l=this.bonus(s,a)),o/=l;h>0;)h-=Math.ceil(k*(s+1)*1.0078**s/(i*c*o*l)),s++,a===13&&(l=this.bonus(s,a));return h<0&&s--,s}time(s,t,a){const i=this.hackstats.rcap,c=this.hackstats.rpow;let o=this.speed(),h=0;const k=v[a][1];let l=1;for(a===13&&(l=this.bonus(s,a)),o/=l;s<t;)h+=Math.ceil(k*(s+1)*1.0078**s/(i*c*o*l)),s++,a===13&&(l=this.bonus(s,a));return h}}class Se extends X.Component{constructor(s){super(s),this.state={hackoption:this.props.hackstats.hackoption,sortConfig:{key:"change",direction:"descending"},isReady:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.requestSort=this.requestSort.bind(this)}componentDidMount(){setTimeout(()=>this.setState({isReady:!0}),300)}requestSort(s){let t="descending";this.state.sortConfig.key===s&&this.state.sortConfig.direction==="descending"&&(t="ascending"),this.setState({sortConfig:{key:s,direction:t}})}handleFocus(s){s.target.select()}handleSubmit(s){s.preventDefault()}handleChange(s,t,a=-1){let i=s.target?s.target.value:s.value;s.target&&s.target.type==="checkbox"&&(i=s.target.checked);let c={...this.props.hackstats};if(a<0){c={...c,[t]:i},this.props.handleSettings("hackstats",c);return}if(t==="msdown"){let h=[...c.hacks],k={...h[a],goal:this.milestone({level:h[a].goal,hackidx:a})};h[a]=k,c={...c,hacks:h},this.props.handleSettings("hackstats",c);return}if(t==="msup"){let h=[...c.hacks],k={...h[a],goal:this.milestone({level:h[a].goal,hackidx:a,next:!0})};h[a]=k,c={...c,hacks:h},this.props.handleSettings("hackstats",c);return}let o=[...c.hacks];if(t==="hacks")o=i;else{let h={...o[a],[t]:i};o[a]=h}c={...c,hacks:o},this.props.handleSettings("hackstats",c)}handleButtonChange(s,t,a){if(t==="hacks"){this.props.handleSettings("hackstats",{...this.props.hackstats,hacks:s.target.value});return}this.handleChange({target:{value:s.target.value}},t,a)}milestone(s){if(s.next){let c=0,o=10;for(;o<=s.level;)c++,o=Math.floor((c*10+10)*Math.pow(1.1,c));let h=v[s.hackidx][5];return o>h?h:o}let t=0,a=10,i=0;for(;a<s.level;)t++,i=a,a=Math.floor((t*10+10)*Math.pow(1.1,t));return i}level(s){if(s.level=Number(s.level),s.level<0)return 0;let t=v[s.hackidx][5];return s.level>t?t:s.level}startlevel(s){if(s.level=Number(s.level),s.level<=0)return 0;let t=v[s.hackidx][5];return s.level>t?t:s.level}reducer(s){if(s.reducer=Number(s.reducer),s.reducer<1)return 0;let t=v[s.hackidx][4];return s.reducer>t-2?t-2:s.reducer}sortHandler(s){return()=>this.requestSort(s)}render(){if(!this.state.isReady)return e.jsx(Y,{});Z.pageview("/hacks/");let s=new pe(this.props);const t=this.props.hackstats.hacktime,a=[0,1,2],i=this.props.hackstats.hackoption,c=this.state.hackoption;let o=0,h=0,k=1;this.state.hackoption,this.props.hackstats.hackoption;const{key:l,direction:b}=this.state.sortConfig;return e.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:e.jsxs("form",{onSubmit:this.handleSubmit,children:[e.jsx(S,{container:!0,spacing:2,justifyContent:"center",sx:{mb:2},children:e.jsxs(S,{item:!0,xs:12,md:8,children:[e.jsx(E,{sx:{p:2},elevation:3,children:e.jsxs(S,{container:!0,spacing:2,children:[e.jsx(S,{item:!0,xs:6,sm:4,children:e.jsx(y,{label:"R power",value:this.props.hackstats.rpow,onChange:d=>this.handleChange(d,"rpow"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})}),e.jsx(S,{item:!0,xs:6,sm:4,children:e.jsx(y,{label:"R cap",value:this.props.hackstats.rcap,onChange:d=>this.handleChange(d,"rcap"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})}),e.jsx(S,{item:!0,xs:6,sm:4,children:e.jsxs(_,{sx:{display:"flex",alignItems:"flex-end",gap:1},children:[e.jsx(y,{label:"Hack speed",value:this.props.hackstats.hackspeed,onChange:d=>this.handleChange(d,"hackspeed"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}}),e.jsx(ne,{control:e.jsx(re,{checked:this.props.hackstats.lockSpeed,onChange:d=>this.props.handleSettings("hackstats",{...this.props.hackstats,lockSpeed:!this.props.hackstats.lockSpeed}),size:"small"}),label:"Lock"})]})}),e.jsx(S,{item:!0,xs:6,sm:6,children:e.jsxs(_,{sx:{display:"flex",gap:1},children:[e.jsxs(ae,{value:this.state.timeUnit,onChange:d=>this.setState({timeUnit:d.target.value}),size:"small",sx:{width:120},children:[e.jsx(I,{value:"minutes",children:"Minutes"}),e.jsx(I,{value:"hours",children:"Hours"})]}),e.jsx(y,{label:"Hack Time",value:this.state.timeUnit==="hours"?Math.round(t/60*100)/100:t,onChange:d=>{const f=Number(d.target.value),p=this.state.timeUnit==="hours"?f*60:f;this.handleChange({target:{value:p}},"hacktime")},onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})]})}),e.jsx(S,{item:!0,xs:6,sm:6,children:e.jsx(y,{select:!0,label:"Hack Optimizer Mode",value:c,onChange:d=>{this.setState({hackoption:d.target.value}),this.handleChange(d,"hackoption")},fullWidth:!0,children:a.map((d,f)=>e.jsx(I,{value:f,children:["level target.","max level in "+M(t*60*50),"max MS in "+M(t*60*50)][f]},f))})})]})}),e.jsx(te,{...this.props,name:"hackstats",e:!1,m:!1,r:!0})]})}),e.jsx(E,{sx:{width:"100%",overflowX:"auto"},elevation:3,children:e.jsxs(ee,{size:"small",children:[e.jsx(ie,{children:e.jsxs(z,{children:[e.jsx(n,{children:e.jsx(C,{active:l==="name",direction:l==="name"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("name"),children:"Hack"})}),e.jsx(n,{children:e.jsxs(C,{active:l==="reducer",direction:l==="reducer"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("reducer"),children:["Milestone",e.jsx("br",{}),"Reducers"]})}),e.jsx(n,{children:e.jsx(C,{active:l==="level",direction:l==="level"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("level"),children:"Level"})}),e.jsx(n,{children:e.jsx(C,{active:l==="bonus",direction:l==="bonus"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("bonus"),children:"Bonus"})}),i==="0"&&e.jsx(n,{children:e.jsx(C,{active:l==="target",direction:l==="target"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("target"),children:"Target"})}),i==="1"&&e.jsxs(n,{children:["Max Level",e.jsx("br",{}),"in ",t,"min"]}),i==="2"&&e.jsxs(n,{children:["Max MS",e.jsx("br",{}),"in ",t,"min"]}),e.jsx(n,{}),e.jsx(n,{children:e.jsx(C,{active:l==="mschange",direction:l==="mschange"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("mschange"),children:"MS"})}),e.jsx(n,{children:e.jsx(C,{active:l==="time",direction:l==="time"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("time"),children:"Time"})}),e.jsx(n,{children:e.jsx(C,{active:l==="projected_bonus",direction:l==="projected_bonus"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("projected_bonus"),children:"Bonus"})}),e.jsx(n,{children:e.jsx(C,{active:l==="change",direction:l==="change"?b==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("change"),children:"Change"})}),e.jsx(n,{children:"Next Level"}),i==="0"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Target"]}),i==="1"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Max Level"]}),i==="2"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Max MS"]})]})}),e.jsx(se,{children:(()=>{let d=v.map((p,r)=>{const T=this.props.hackstats.hacks[r].reducer,m=this.props.hackstats.hacks[r].level,x=s.bonus(m,r);let u=0;i==="0"?u=this.props.hackstats.hacks[r].goal:(u=s.reachable(m,t,r),i==="2"&&(u=s.milestoneLevel(u,r)));let g=u>m?s.bonus(u,r):x,P=s.time(m,u,r),q=s.time(m,m+1,r),B=s.time(m,u+1,r)-s.time(m,u,r),L=u>m?s.milestones(u,r)-s.milestones(m,r):0,A="+"+L;const w=g/x;return{pos:r,name:p[0],reducer:T,level:m,currBonus:x,target:u,bonus:g,time:P,timePastLevel:q,timePastTarget:B,mschange:L,mschange_str:A,change:w,projected_bonus:g}});o=0,h=0,k=1,d.forEach(p=>{o+=p.time,p.pos===13&&(h=p.time,k=p.change<1?1:p.change)}),this.state.sortConfig.key&&d.sort((p,r)=>p[this.state.sortConfig.key]<r[this.state.sortConfig.key]?this.state.sortConfig.direction==="ascending"?-1:1:p[this.state.sortConfig.key]>r[this.state.sortConfig.key]?this.state.sortConfig.direction==="ascending"?1:-1:0);const f=d.map(p=>{const{pos:r,name:T,reducer:m,level:x,currBonus:u,target:g,bonus:P,time:q,timePastLevel:B,timePastTarget:L,mschange_str:A,change:w}=p;return e.jsxs(z,{children:[e.jsx(n,{component:"th",scope:"row",children:T}),e.jsx(n,{children:e.jsx(y,{type:"number",value:m,onChange:j=>this.handleChange(j,"reducer",r),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:60},hiddenLabel:!0,size:"small"})}),e.jsx(n,{children:e.jsx(y,{type:"number",value:x,onChange:j=>this.handleChange(j,"level",r),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:80},hiddenLabel:!0,size:"small"})}),e.jsxs(n,{children:[N(u,2),"%"]}),i==="0"&&e.jsx(n,{children:e.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(y,{type:"number",value:g,onChange:j=>this.handleChange(j,"goal",r),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:80,mr:1},hiddenLabel:!0,size:"small"}),e.jsx(O,{size:"small",onClick:j=>this.handleChange(j,"msdown",r),children:e.jsx(ue,{fontSize:"small"})}),e.jsx(O,{size:"small",onClick:j=>this.handleChange(j,"msup",r),children:e.jsx(ce,{fontSize:"small"})})]})}),i!=="0"&&e.jsx(n,{children:g}),e.jsx(n,{children:g!==this.props.hackstats.hacks[r].goal?i==="0"?g===x?null:e.jsx(D,{size:"small",onClick:j=>this.handleButtonChange({target:{value:g>x?g:x}},g>x?"level":"goal",r),children:"Complete"}):e.jsx(D,{size:"small",onClick:j=>this.handleButtonChange({target:{value:g}},"goal",r),children:"Set Target"}):null}),e.jsx(n,{children:A}),e.jsx(n,{children:M(q)}),e.jsxs(n,{children:[N(P,2),"%"]}),e.jsxs(n,{children:["Ã—",N(w,3)," ",Math.round((w-1)*100)!==0&&e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["(",Math.abs((w-1)*100%1)>.01?"~":"",Math.round((w-1)*100),"%)"]})]}),e.jsx(n,{children:M(B)}),e.jsx(n,{children:M(L)})]},r)});return f.push(e.jsxs(z,{children:[e.jsx(n,{colSpan:9}),e.jsxs(n,{children:[e.jsx("b",{children:"Min total:"}),e.jsx("br",{}),M((o-h)/k+h)]}),e.jsx(n,{colSpan:4})]},"summary-min")),f.push(e.jsxs(z,{children:[e.jsx(n,{colSpan:9}),e.jsxs(n,{children:[e.jsx("b",{children:"Max total:"}),e.jsx("br",{}),M(o)]}),e.jsx(n,{colSpan:4,children:e.jsx(D,{variant:"contained",onClick:p=>{const r=v.map((T,m)=>{const x=this.props.hackstats.hacks[m],u=Math.max(x.level,x.goal);return{...x,level:u,goal:u}});this.handleButtonChange({target:{value:r}},"hacks")},children:"Complete All"})})]},"summary-max")),f})()})]})})]})})}}export{Se as default};
