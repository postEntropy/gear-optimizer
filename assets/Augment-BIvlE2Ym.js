import{K as A,j as e,U as C,e as I,a0 as E,I as b,L as N,M as v}from"./index-lSDB2ENr.js";import{k as d,l as o,m as j,G as f,T as R,j as z}from"./util-C2G4lNtz.js";import{T as w,S as k}from"./TextField-Dg3reb6-.js";import{T as F}from"./TableHead-nYQrNpMc.js";class T{constructor(t,a){this.augstats=t,this.augs=a}exponent(t){let a=Number(this.augstats.lsc),s=.1;return a>0&&(s+=.05),a>=20&&(s+=.05,a=20),s+=a*.01,1+s*t}goldCost(t,a){var s;if(t>4&&!a)t===5&&(s=18e15),t===6&&(s=23e18);else{var n,i,l,r;a?(n=1e7,i=50,l=1e3,r=6):(n=1e4,i=20,l=1e3,r=4),s=n*Math.pow(i,Math.min(r,t))*Math.pow(l,Math.max(0,t-4))}const u=this.augstats.nac>=5?.5:1;return s*u}cost(t,a,s,n){if(n)return this.goldCost(t,s);const i=[2e7,5e19,5e34/1.2][a],l=s?12:17,r=s?800:1400;return i*Math.pow(l,Math.min(4,t))*Math.pow(r,Math.max(0,t-4))}energy(t){const a=Math.max(0,Number(this.augstats.augs[t].ratio)),s=Number(this.augstats.ecap);return[s*a/(a+1),s/(a+1)]}reachable(t,a){const s=Number(this.augstats.version);let n=0,i=Number(this.augstats.time)*60*50;i>365*432e4&&(i=365*432e4);const l=Number(this.augstats.augspeed),r=a?this.energy(t)[1]:this.energy(t)[0],u=this.cost(t,s,a,!1),m=this.cost(t,s,a,!0),c=Number(this.augstats.gps)/50;let g=Number(this.augstats.gold)+c;const p=r*l/u;if(g+c*i>Math.pow(i,a?3:2)/2*m&&500*p>n)for(let h=1;h<501;h++){if(h*p>=n+Math.floor(i/h))return[Math.min(1e9,n+Math.floor(i/h)),!1];Math.floor(h*p)>n&&(i-=h*(Math.floor(h*p)-n),n=Math.floor(h*p))}let S=!1;for(;i>0&&n<1e9;){const h=a?m*Math.pow(n+1,2):m*(n+1);if(g<h){if(S=!0,c<=0)break;const x=Math.ceil((h-g)/c);i-=x,i<0&&(i=0),g+=x*c}else{const x=Math.ceil(u*(n+1)/(r*l));i-=x,g+=x*c-h,n++}}return i<0&&n--,[Math.min(1e9,n),S]}boost(t,a,s){const i=this.augs[t].boost*Math.pow(a,this.exponent(t)),l=1+Math.pow(s,2);return Math.max(1,Math.floor(i*l/1))}}class G extends A.Component{constructor(t){super(t),this.state={value:this.props.version},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(t){this.setState({value:t.target.value}),this.props.handleChange(t,"version")}handleSubmit(t){t.preventDefault()}render(){this.state.value!==this.props.augstats.version&&(this.state.value=this.props.augstats.version);const t=["normal","evil","sadistic"];return e.jsx(w,{select:!0,label:"Difficulty",value:this.state.value,onChange:this.handleChange,size:"small",sx:{width:120,m:1},children:t.map((a,s)=>e.jsx(C,{value:s,children:a},s))})}}const M=[{name:"scissors",boost:Math.pow(25,0)},{name:"milk",boost:Math.pow(25,1)},{name:"cannon",boost:Math.pow(25,2)},{name:"mounted",boost:Math.pow(25,3)},{name:"buster",boost:Math.pow(25,4)},{name:"exo",boost:Math.pow(25,5)*100},{name:"laser sword",boost:Math.pow(25,6)*1e4}];class H extends I.Component{constructor(t){super(t),this.state={timeUnit:"minutes",isReady:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){setTimeout(()=>this.setState({isReady:!0}),300)}handleFocus(t){t.target.select()}handleSubmit(t){t.preventDefault()}handleChange(t,a,s=-1){let n=t.target.value,i={...this.props.augstats};if(s<0){i={...i,[a]:n},this.props.handleSettings("augstats",i);return}let l=[...i.augs],r={...l[s],[a]:n};l[s]=r,i={...i,augs:l},this.props.handleSettings("augstats",i)}configureRatios(t){const a=this.props.augstats;let s,n=new T(a,M);const i=a.version;t==="exponent"&&(s=a.augs.map((l,r)=>{const u=n.exponent(r)/2;return{...l,ratio:u}})),t==="cost"&&(s=a.augs.map((l,r)=>{const u=n.cost(r,i,!1,!1)/n.cost(r,i,!0,!1);return{...l,ratio:u}})),t==="equal"&&(s=a.augs.map((l,r)=>({...l,ratio:1}))),this.props.handleSettings("augstats",{...a,augs:s})}input(t,a,s=100){return e.jsx(w,{type:"number",value:t,onFocus:this.handleFocus,onChange:n=>this.handleChange(n,...a),sx:{width:s,m:.5},inputProps:{step:"any"},hiddenLabel:!0,size:"small"})}namedInput(t,a,s,n=250){return e.jsxs(d,{children:[e.jsx(o,{children:t}),e.jsx(o,{children:this.input(a,s,n)})]})}augment(t,a,s){let n=new T(t,M);const i=n.reachable(s,!1),l=i[0],u=i[1]?0:n.reachable(s,!0)[0],m=n.boost(s,l,u),c=n.energy(s);return e.jsxs(d,{children:[e.jsx(o,{children:a.name}),e.jsx(o,{children:this.input(t.augs[s].ratio,["ratio",s],80)}),e.jsx(o,{children:j(c[0])}),e.jsx(o,{children:j(c[1])}),e.jsx(o,{children:j(l)}),e.jsx(o,{children:j(u)}),e.jsx(o,{children:j(m)})]},s)}render(){E.pageview("/augment/");const t=this.props.augstats;return e.jsx(b,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:e.jsxs("form",{onSubmit:this.handleSubmit,children:[e.jsx(f,{container:!0,spacing:2,justifyContent:"center",children:e.jsx(f,{item:!0,xs:12,children:e.jsx(N,{sx:{p:2},children:e.jsx(R,{size:"small",children:e.jsxs(z,{children:[this.namedInput("Energy cap",t.ecap,["ecap"]),this.namedInput("Augment speed",t.augspeed,["augspeed"]),this.namedInput("Gold",t.gold,["gold"]),this.namedInput("Net GPS",t.gps,["gps"]),this.namedInput("Normal NAC:",t.nac,["nac"]),this.namedInput("Normal LSC:",t.lsc,["lsc"]),e.jsxs(d,{children:[e.jsx(o,{children:"Augment Time"}),e.jsx(o,{children:e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsxs(k,{value:this.state.timeUnit,onChange:a=>this.setState({timeUnit:a.target.value}),size:"small",sx:{width:120},children:[e.jsx(C,{value:"minutes",children:"Minutes"}),e.jsx(C,{value:"hours",children:"Hours"})]}),e.jsx(w,{value:this.state.timeUnit==="hours"?Math.round(t.time/60*100)/100:t.time,onChange:a=>{const s=Number(a.target.value),n=this.state.timeUnit==="hours"?s*60:s;this.handleChange({target:{value:n}},"time")},onFocus:this.handleFocus,type:"number",sx:{width:150},inputProps:{step:"any"},hiddenLabel:!0,size:"small"})]})})]}),e.jsxs(d,{children:[e.jsx(o,{children:"Game mode:"}),e.jsx(o,{children:e.jsx(G,{...this.props,handleChange:this.handleChange})})]}),e.jsxs(d,{children:[e.jsx(o,{children:"Ratio:"}),e.jsx(o,{children:e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(v,{variant:"outlined",size:"small",onClick:()=>this.configureRatios("exponent"),children:"Exponent"}),e.jsx(v,{variant:"outlined",size:"small",onClick:()=>this.configureRatios("cost"),children:"Cost"}),e.jsx(v,{variant:"outlined",size:"small",onClick:()=>this.configureRatios("equal"),children:"Equal"})]})})]})]})})})})}),e.jsx(f,{container:!0,spacing:2,justifyContent:"center",sx:{mt:2},children:e.jsx(f,{item:!0,xs:12,children:e.jsx(N,{sx:{p:2,overflowX:"auto"},children:e.jsxs(R,{size:"small",children:[e.jsx(F,{children:e.jsxs(d,{children:[e.jsx(o,{children:"Augment"}),e.jsx(o,{children:"Ratio"}),e.jsxs(o,{children:["Augment",e.jsx("br",{}),"Energy"]}),e.jsxs(o,{children:["Upgrade",e.jsx("br",{}),"Energy"]}),e.jsxs(o,{children:["Augment",e.jsx("br",{}),"Level"]}),e.jsxs(o,{children:["Upgrade",e.jsx("br",{}),"Level"]}),e.jsx(o,{children:"Boost"})]})}),e.jsx(z,{children:M.map((a,s)=>this.augment(t,a,s))})]})})})})]})})}}export{H as default};
