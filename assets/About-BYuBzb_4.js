import{K as d,ap as n,j as e,I as h,M as r,e as g,N as u,a0 as m,H as a,aq as o}from"./index-CoXk5o7o.js";import{T as x}from"./TextField-DokyWFQN.js";import{S as f}from"./Stack-DWyr5yyO.js";import{D as b,a as v}from"./DialogContent-BFWh4s68.js";const i='{"logMessage": "$(git log -1 --oneline)"}',l="{$(grep version -m1 package.json)}";class j extends d.Component{constructor(t){super(t),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={save:btoa(null)},this.fresh=!0}handleSubmit(t){t.preventDefault(),this.handleClose()}handleChange(t,s){if(s===void 0){s=null;try{s=atob(this.state.save)}catch{console.log("Error: invalid local storage imported."),this.handleClose();return}}window.localStorage.setItem(n,s),this.props.handleLoadStateLocalStorage()}handleFocus(t){t.target.select()}handleClose(){this.fresh=!0,this.props.closePortModal()}render(){const t=btoa(window.localStorage.getItem(n));return this.fresh&&(this.state.save=t,this.fresh=!1),e.jsxs(h,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(x,{label:"Local storage",value:this.state.save,onChange:s=>this.setState({save:s.target.value}),onFocus:this.handleFocus,fullWidth:!0,variant:"outlined",autoFocus:!0}),e.jsxs(f,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e.jsx(r,{variant:"contained",onClick:s=>this.handleChange(s),children:"Import"}),e.jsx(r,{variant:"outlined",color:"error",onClick:s=>this.handleChange(s,null),children:"Clear local storage"}),e.jsx(r,{variant:"text",onClick:this.props.closePortModal,children:"Cancel"})]})]})}}class k extends g.Component{static contextType=u;constructor(t){super(t),this.state={open:!1,latest:null},this.fresh=!0}getLatestVersionNumber(){var t=new XMLHttpRequest;t.addEventListener("load",()=>{let s=null;try{s=JSON.parse(t.responseText)[0].name}catch{s=null}s!==null&&this.setState({latest:s})}),t.open("GET","https://api.github.com/repos/gmiclotte/gear-optimizer/tags"),t.send()}render(){if(m.pageview("/about"),this.fresh){try{this.getLatestVersionNumber()}catch{this.setState({latest:null})}this.fresh=!1}return e.jsxs(h,{sx:{p:2,textAlign:"center"},children:[e.jsxs(a,{variant:"body1",paragraph:!0,children:["NGU Idle Gear Optimizer v"+l.version,e.jsx("br",{}),"Latest version: "+(this.state.latest===null?"loading...":"v"+this.state.latest),e.jsx("br",{}),this.state.latest!==null&&l.version!==this.state.latest?"Update by closing and reopening the optimizer once or twice.":"",e.jsx("br",{})," ","Git hash: "+(i.logMessage?i.logMessage.slice(0,8):"Unknown")]}),e.jsx(a,{variant:"body1",paragraph:!0,children:e.jsx(o,{href:"https://github.com/gmiclotte/gear-optimizer/issues/new",target:"_blank",rel:"noopener noreferrer",children:"Report an issue."})}),e.jsxs(a,{variant:"body1",paragraph:!0,children:["Not affiliated with ",e.jsx(o,{href:"https://www.kongregate.com/games/somethingggg/ngu-idle",target:"_blank",rel:"noopener noreferrer",children:"NGU Idle"}),"."]}),e.jsxs(a,{variant:"body1",paragraph:!0,children:["All art copyright by ",e.jsx(o,{href:"https://www.kongregate.com/accounts/somethingggg",target:"_blank",rel:"noopener noreferrer",children:"4G"}),"."]}),e.jsx(r,{variant:"contained",onClick:()=>this.setState({open:!0}),children:"Import/Export local storage"}),e.jsx(b,{open:this.state.open,onClose:()=>this.setState({open:!1}),children:e.jsx(v,{children:e.jsx(j,{...this.props,closePortModal:()=>this.setState({open:!1})})})})]})}}export{k as default};
