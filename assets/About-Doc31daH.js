import{d as P,b as U,ap as v,D as _,e as p,m as $,_ as z,A as O,h as H,f as u,j as s,s as W,n as q,p as w,l as J,H as l,K,aq as j,I as S,M as c,N as X,a0 as Q}from"./index-BnwOAjjQ.js";import{T as Y}from"./TextField-p200wOhE.js";import{S as Z}from"./Stack-DduAglPJ.js";import{D as ee,a as te}from"./DialogContent-DB7o6dNS.js";function se(o){return U("MuiLink",o)}const oe=P("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),D={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ne=o=>D[o]||o,re=({theme:o,ownerState:e})=>{const t=ne(e.color),n=v(o,`palette.${t}`,!1)||e.color,r=v(o,`palette.${t}Channel`);return"vars"in o&&r?`rgba(${r} / 0.4)`:_.alpha(n,.4)},ae=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ie=o=>{const{classes:e,component:t,focusVisible:n,underline:r}=o,a={root:["root",`underline${w(r)}`,t==="button"&&"button",n&&"focusVisible"]};return J(a,se,e)},le=W(l,{name:"MuiLink",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:t}=o;return[e.root,e[`underline${w(t.underline)}`],t.component==="button"&&e.button]}})(({theme:o,ownerState:e})=>u({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&u({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:re({theme:o,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oe.focusVisible}`]:{outline:"auto"}})),d=p.forwardRef(function(e,t){const n=$({props:e,name:"MuiLink"}),{className:r,color:a="primary",component:g="a",onBlur:f,onFocus:m,TypographyClasses:F,underline:M="always",variant:x="inherit",sx:h}=n,R=z(n,ae),{isFocusVisibleRef:b,onBlur:A,onFocus:V,ref:N}=O(),[T,C]=p.useState(!1),G=H(t,N),E=i=>{A(i),b.current===!1&&C(!1),f&&f(i)},B=i=>{V(i),b.current===!0&&C(!0),m&&m(i)},y=u({},n,{color:a,component:g,focusVisible:T,underline:M,variant:x}),I=ie(y);return s.jsx(le,u({color:a,className:q(I.root,r),classes:F,component:g,onBlur:E,onFocus:B,ref:G,ownerState:y,variant:x,sx:[...Object.keys(D).includes(a)?[]:[{color:a}],...Array.isArray(h)?h:[h]]},R))}),k='{"logMessage": "$(git log -1 --oneline)"}',L="{$(grep version -m1 package.json)}";class ce extends K.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={save:btoa(null)},this.fresh=!0}handleSubmit(e){e.preventDefault(),this.handleClose()}handleChange(e,t){if(t===void 0){t=null;try{t=atob(this.state.save)}catch{console.log("Error: invalid local storage imported."),this.handleClose();return}}window.localStorage.setItem(j,t),this.props.handleLoadStateLocalStorage()}handleFocus(e){e.target.select()}handleClose(){this.fresh=!0,this.props.closePortModal()}render(){const e=btoa(window.localStorage.getItem(j));return this.fresh&&(this.state.save=e,this.fresh=!1),s.jsxs(S,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[s.jsx(Y,{label:"Local storage",value:this.state.save,onChange:t=>this.setState({save:t.target.value}),onFocus:this.handleFocus,fullWidth:!0,variant:"outlined",autoFocus:!0}),s.jsxs(Z,{direction:"row",spacing:1,justifyContent:"flex-end",children:[s.jsx(c,{variant:"contained",onClick:t=>this.handleChange(t),children:"Import"}),s.jsx(c,{variant:"outlined",color:"error",onClick:t=>this.handleChange(t,null),children:"Clear local storage"}),s.jsx(c,{variant:"text",onClick:this.props.closePortModal,children:"Cancel"})]})]})}}class ge extends p.Component{static contextType=X;constructor(e){super(e),this.state={open:!1,latest:null},this.fresh=!0}getLatestVersionNumber(){var e=new XMLHttpRequest;e.addEventListener("load",()=>{let t=null;try{t=JSON.parse(e.responseText)[0].name}catch{t=null}t!==null&&this.setState({latest:t})}),e.open("GET","https://api.github.com/repos/gmiclotte/gear-optimizer/tags"),e.send()}render(){if(Q.pageview("/about"),this.fresh){try{this.getLatestVersionNumber()}catch{this.setState({latest:null})}this.fresh=!1}return s.jsxs(S,{sx:{p:2,textAlign:"center"},children:[s.jsxs(l,{variant:"body1",paragraph:!0,children:["NGU Idle Gear Optimizer v"+L.version,s.jsx("br",{}),"Latest version: "+(this.state.latest===null?"loading...":"v"+this.state.latest),s.jsx("br",{}),this.state.latest!==null&&L.version!==this.state.latest?"Update by closing and reopening the optimizer once or twice.":"",s.jsx("br",{})," ","Git hash: "+(k.logMessage?k.logMessage.slice(0,8):"Unknown")]}),s.jsx(l,{variant:"body1",paragraph:!0,children:s.jsx(d,{href:"https://github.com/gmiclotte/gear-optimizer/issues/new",target:"_blank",rel:"noopener noreferrer",children:"Report an issue."})}),s.jsxs(l,{variant:"body1",paragraph:!0,children:["Not affiliated with ",s.jsx(d,{href:"https://www.kongregate.com/games/somethingggg/ngu-idle",target:"_blank",rel:"noopener noreferrer",children:"NGU Idle"}),"."]}),s.jsxs(l,{variant:"body1",paragraph:!0,children:["All art copyright by ",s.jsx(d,{href:"https://www.kongregate.com/accounts/somethingggg",target:"_blank",rel:"noopener noreferrer",children:"4G"}),"."]}),s.jsx(c,{variant:"contained",onClick:()=>this.setState({open:!0}),children:"Import/Export local storage"}),s.jsx(ee,{open:this.state.open,onClose:()=>this.setState({open:!1}),children:s.jsx(te,{children:s.jsx(ce,{...this.props,closePortModal:()=>this.setState({open:!1})})})})]})}}export{ge as default};
