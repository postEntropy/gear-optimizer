import{a5 as X,p as Y,a6 as Z,E as ee,a7 as te,o as se,a8 as ae,a9 as ne,i as re,y as ie,z as le,h as ce,A as oe,aa as he,ab as V,ac as J,g as K,Q as ue,ad as v,e as de,j as e,$ as pe,a0 as me,I as T,L as O,U as A,ae as W,M as E}from"./index-BnwOAjjQ.js";import{i as ge,u as xe,T as y,S as ke}from"./TextField-p200wOhE.js";import{n as je,G as M,t as w,T as fe,k as I,l as n,j as ve,d as B}from"./util-DK8B1WaS.js";import{M as be}from"./ModifierForm-CXEREbD7.js";import{F as Ce,C as Se}from"./SaveForm-CkFnAjRB.js";import{T as ye}from"./TableHead-D857zDYR.js";import{T as S}from"./TableSortLabel-DDKqBEob.js";import"./Stack-DduAglPJ.js";function Me(g,t){return()=>null}function we(g,t){return()=>null}function _e(g,t,s,a,r){return null}const Fe={configure:g=>{X.configure(g)}},Re=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Y,createChainedFunction:Z,createSvgIcon:ee,debounce:te,deprecatedPropType:Me,isMuiElement:ge,ownerDocument:se,ownerWindow:ae,requirePropFactory:we,setRef:ne,unstable_ClassNameGenerator:Fe,unstable_useEnhancedEffect:re,unstable_useId:ie,unsupportedProp:_e,useControlled:xe,useEventCallback:le,useForkRef:ce,useIsFocusVisible:oe},Symbol.toStringTag,{value:"Module"}));var F={},D={};const He=he(Re);var G;function Q(){return G||(G=1,(function(g){"use client";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=He})(D)),D}var U;function Pe(){if(U)return F;U=1;var g=V();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var t=g(Q()),s=J();return F.default=(0,t.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),F}var Te=Pe();const Ie=K(Te);var R={},$;function ze(){if($)return R;$=1;var g=V();Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var t=g(Q()),s=J();return R.default=(0,t.default)((0,s.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove"),R}var Le=ze();const qe=K(Le);class Ne{constructor(t){this.hackstats=t.hackstats,this.state=t}speed(){let t=this.hackstats.hackspeed;return t*=je(this.hackstats,this.state,ue.HACK,{rBetaPot:2,rDeltaPot:3}),t}bonus(t,s){const a=v[s];return(t*a[2]+100)*a[3]**this.milestones(t,s)}milestones(t,s){const a=v[s],r=this.hackstats.hacks[s].reducer;return Math.floor(t/(a[4]-r))}milestoneLevel(t,s){const a=v[s],r=this.hackstats.hacks[s].reducer;return Math.floor(t/(a[4]-r))*(a[4]-r)}reachable(t,s,a){const r=this.hackstats.rcap,o=this.hackstats.rpow;let h=this.speed(),c=s*60*50;const j=v[a][1];let l=1;for(a===13&&(l=this.bonus(t,a)),h/=l;c>0;)c-=Math.ceil(j*(t+1)*1.0078**t/(r*o*h*l)),t++,a===13&&(l=this.bonus(t,a));return c<0&&t--,t}time(t,s,a){const r=this.hackstats.rcap,o=this.hackstats.rpow;let h=this.speed(),c=0;const j=v[a][1];let l=1;for(a===13&&(l=this.bonus(t,a)),h/=l;t<s;)c+=Math.ceil(j*(t+1)*1.0078**t/(r*o*h*l)),t++,a===13&&(l=this.bonus(t,a));return c}}class $e extends de.Component{constructor(t){super(t),this.state={hackoption:this.props.hackstats.hackoption,sortConfig:{key:"change",direction:"descending"},isReady:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.requestSort=this.requestSort.bind(this)}componentDidMount(){setTimeout(()=>this.setState({isReady:!0}),300)}requestSort(t){let s="descending";this.state.sortConfig.key===t&&this.state.sortConfig.direction==="descending"&&(s="ascending"),this.setState({sortConfig:{key:t,direction:s}})}handleFocus(t){t.target.select()}handleSubmit(t){t.preventDefault()}handleChange(t,s,a=-1){let r=t.target?t.target.value:t.value;t.target&&t.target.type==="checkbox"&&(r=t.target.checked);let o={...this.props.hackstats};if(a<0){o={...o,[s]:r},this.props.handleSettings("hackstats",o);return}if(s==="msdown"){let c=[...o.hacks],j={...c[a],goal:this.milestone({level:c[a].goal,hackidx:a})};c[a]=j,o={...o,hacks:c},this.props.handleSettings("hackstats",o);return}if(s==="msup"){let c=[...o.hacks],j={...c[a],goal:this.milestone({level:c[a].goal,hackidx:a,next:!0})};c[a]=j,o={...o,hacks:c},this.props.handleSettings("hackstats",o);return}let h=[...o.hacks];if(s==="hacks")h=r;else{let c={...h[a],[s]:r};h[a]=c}o={...o,hacks:h},this.props.handleSettings("hackstats",o)}handleButtonChange(t,s,a){if(s==="hacks"){this.props.handleSettings("hackstats",{...this.props.hackstats,hacks:t.target.value});return}this.handleChange({target:{value:t.target.value}},s,a)}milestone(t){if(t.next){let o=0,h=10;for(;h<=t.level;)o++,h=Math.floor((o*10+10)*Math.pow(1.1,o));let c=v[t.hackidx][5];return h>c?c:h}let s=0,a=10,r=0;for(;a<t.level;)s++,r=a,a=Math.floor((s*10+10)*Math.pow(1.1,s));return r}level(t){if(t.level=Number(t.level),t.level<0)return 0;let s=v[t.hackidx][5];return t.level>s?s:t.level}startlevel(t){if(t.level=Number(t.level),t.level<=0)return 0;let s=v[t.hackidx][5];return t.level>s?s:t.level}reducer(t){if(t.reducer=Number(t.reducer),t.reducer<1)return 0;let s=v[t.hackidx][4];return t.reducer>s-2?s-2:t.reducer}sortHandler(t){return()=>this.requestSort(t)}render(){if(!this.state.isReady)return e.jsx(pe,{});me.pageview("/hacks/");let t=new Ne(this.props);const s=this.props.hackstats.hacktime,a=[0,1,2],r=this.props.hackstats.hackoption,o=this.state.hackoption;let h=0,c=0,j=1;this.state.hackoption,this.props.hackstats.hackoption;const{key:l,direction:C}=this.state.sortConfig;return e.jsx(T,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:e.jsxs("form",{onSubmit:this.handleSubmit,children:[e.jsx(M,{container:!0,spacing:2,justifyContent:"center",sx:{mb:2},children:e.jsxs(M,{item:!0,xs:12,md:8,children:[e.jsx(O,{sx:{p:2},elevation:3,children:e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:6,sm:4,children:e.jsx(y,{label:"R power",value:this.props.hackstats.rpow,onChange:u=>this.handleChange(u,"rpow"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})}),e.jsx(M,{item:!0,xs:6,sm:4,children:e.jsx(y,{label:"R cap",value:this.props.hackstats.rcap,onChange:u=>this.handleChange(u,"rcap"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})}),e.jsx(M,{item:!0,xs:6,sm:4,children:e.jsxs(T,{sx:{display:"flex",alignItems:"flex-end",gap:1},children:[e.jsx(y,{label:"Hack speed",value:this.props.hackstats.hackspeed,onChange:u=>this.handleChange(u,"hackspeed"),onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}}),e.jsx(Ce,{control:e.jsx(Se,{checked:this.props.hackstats.lockSpeed,onChange:u=>this.props.handleSettings("hackstats",{...this.props.hackstats,lockSpeed:!this.props.hackstats.lockSpeed}),size:"small"}),label:"Lock"})]})}),e.jsx(M,{item:!0,xs:6,sm:6,children:e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsxs(ke,{value:this.state.timeUnit,onChange:u=>this.setState({timeUnit:u.target.value}),size:"small",sx:{width:120},children:[e.jsx(A,{value:"minutes",children:"Minutes"}),e.jsx(A,{value:"hours",children:"Hours"})]}),e.jsx(y,{label:"Hack Time",value:this.state.timeUnit==="hours"?Math.round(s/60*100)/100:s,onChange:u=>{const b=Number(u.target.value),p=this.state.timeUnit==="hours"?b*60:b;this.handleChange({target:{value:p}},"hacktime")},onFocus:this.handleFocus,type:"number",fullWidth:!0,inputProps:{step:"any"}})]})}),e.jsx(M,{item:!0,xs:6,sm:6,children:e.jsx(y,{select:!0,label:"Hack Optimizer Mode",value:o,onChange:u=>{this.setState({hackoption:u.target.value}),this.handleChange(u,"hackoption")},fullWidth:!0,children:a.map((u,b)=>e.jsx(A,{value:b,children:["level target.","max level in "+w(s*60*50),"max MS in "+w(s*60*50)][b]},b))})})]})}),e.jsx(be,{...this.props,name:"hackstats",e:!1,m:!1,r:!0})]})}),e.jsx(O,{sx:{width:"100%",overflowX:"auto"},elevation:3,children:e.jsxs(fe,{size:"small",children:[e.jsx(ye,{children:e.jsxs(I,{children:[e.jsx(n,{children:e.jsx(S,{active:l==="name",direction:l==="name"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("name"),children:"Hack"})}),e.jsx(n,{children:e.jsxs(S,{active:l==="reducer",direction:l==="reducer"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("reducer"),children:["Milestone",e.jsx("br",{}),"Reducers"]})}),e.jsx(n,{children:e.jsx(S,{active:l==="level",direction:l==="level"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("level"),children:"Level"})}),e.jsx(n,{children:e.jsx(S,{active:l==="bonus",direction:l==="bonus"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("bonus"),children:"Bonus"})}),r==="0"&&e.jsx(n,{children:e.jsx(S,{active:l==="target",direction:l==="target"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("target"),children:"Target"})}),r==="1"&&e.jsxs(n,{children:["Max Level",e.jsx("br",{}),"in ",s,"min"]}),r==="2"&&e.jsxs(n,{children:["Max MS",e.jsx("br",{}),"in ",s,"min"]}),e.jsx(n,{}),e.jsx(n,{children:e.jsx(S,{active:l==="mschange",direction:l==="mschange"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("mschange"),children:"MS"})}),e.jsx(n,{children:e.jsx(S,{active:l==="time",direction:l==="time"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("time"),children:"Time"})}),e.jsx(n,{children:e.jsx(S,{active:l==="projected_bonus",direction:l==="projected_bonus"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("projected_bonus"),children:"Bonus"})}),e.jsx(n,{children:e.jsx(S,{active:l==="change",direction:l==="change"?C==="ascending"?"asc":"desc":"asc",onClick:this.sortHandler("change"),children:"Change"})}),e.jsx(n,{children:"Next Level"}),r==="0"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Target"]}),r==="1"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Max Level"]}),r==="2"&&e.jsxs(n,{children:["Next Level",e.jsx("br",{}),"After Max MS"]})]})}),e.jsx(ve,{children:(()=>{let u=v.map((p,i)=>{const H=this.props.hackstats.hacks[i].reducer,m=this.props.hackstats.hacks[i].level,x=t.bonus(m,i);let d=0;r==="0"?d=this.props.hackstats.hacks[i].goal:(d=t.reachable(m,s,i),r==="2"&&(d=t.milestoneLevel(d,i)));let k=d>m?t.bonus(d,i):x,z=t.time(m,d,i),L=t.time(m,m+1,i),q=t.time(m,d+1,i)-t.time(m,d,i),P=d>m?t.milestones(d,i)-t.milestones(m,i):0,N="+"+P;const _=k/x;return{pos:i,name:p[0],reducer:H,level:m,currBonus:x,target:d,bonus:k,time:z,timePastLevel:L,timePastTarget:q,mschange:P,mschange_str:N,change:_,projected_bonus:k}});h=0,c=0,j=1,u.forEach(p=>{h+=p.time,p.pos===13&&(c=p.time,j=p.change<1?1:p.change)}),this.state.sortConfig.key&&u.sort((p,i)=>p[this.state.sortConfig.key]<i[this.state.sortConfig.key]?this.state.sortConfig.direction==="ascending"?-1:1:p[this.state.sortConfig.key]>i[this.state.sortConfig.key]?this.state.sortConfig.direction==="ascending"?1:-1:0);const b=u.map(p=>{const{pos:i,name:H,reducer:m,level:x,currBonus:d,target:k,bonus:z,time:L,timePastLevel:q,timePastTarget:P,mschange_str:N,change:_}=p;return e.jsxs(I,{children:[e.jsx(n,{component:"th",scope:"row",children:H}),e.jsx(n,{children:e.jsx(y,{type:"number",value:m,onChange:f=>this.handleChange(f,"reducer",i),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:60},hiddenLabel:!0,size:"small"})}),e.jsx(n,{children:e.jsx(y,{type:"number",value:x,onChange:f=>this.handleChange(f,"level",i),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:80},hiddenLabel:!0,size:"small"})}),e.jsxs(n,{children:[B(d,2),"%"]}),r==="0"&&e.jsx(n,{children:e.jsxs(T,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(y,{type:"number",value:k,onChange:f=>this.handleChange(f,"goal",i),onFocus:this.handleFocus,inputProps:{step:"any"},sx:{width:80,mr:1},hiddenLabel:!0,size:"small"}),e.jsx(W,{size:"small",onClick:f=>this.handleChange(f,"msdown",i),children:e.jsx(qe,{fontSize:"small"})}),e.jsx(W,{size:"small",onClick:f=>this.handleChange(f,"msup",i),children:e.jsx(Ie,{fontSize:"small"})})]})}),r!=="0"&&e.jsx(n,{children:k}),e.jsx(n,{children:k!==this.props.hackstats.hacks[i].goal?r==="0"?k===x?null:e.jsx(E,{size:"small",onClick:f=>this.handleButtonChange({target:{value:k>x?k:x}},k>x?"level":"goal",i),children:"Complete"}):e.jsx(E,{size:"small",onClick:f=>this.handleButtonChange({target:{value:k}},"goal",i),children:"Set Target"}):null}),e.jsx(n,{children:N}),e.jsx(n,{children:w(L)}),e.jsxs(n,{children:[B(z,2),"%"]}),e.jsxs(n,{children:["Ã—",B(_,3)," ",Math.round((_-1)*100)!==0&&e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["(",Math.abs((_-1)*100%1)>.01?"~":"",Math.round((_-1)*100),"%)"]})]}),e.jsx(n,{children:w(q)}),e.jsx(n,{children:w(P)})]},i)});return b.push(e.jsxs(I,{children:[e.jsx(n,{colSpan:9}),e.jsxs(n,{children:[e.jsx("b",{children:"Min total:"}),e.jsx("br",{}),w((h-c)/j+c)]}),e.jsx(n,{colSpan:4})]},"summary-min")),b.push(e.jsxs(I,{children:[e.jsx(n,{colSpan:9}),e.jsxs(n,{children:[e.jsx("b",{children:"Max total:"}),e.jsx("br",{}),w(h)]}),e.jsx(n,{colSpan:4,children:e.jsx(E,{variant:"contained",onClick:p=>{const i=v.map((H,m)=>{const x=this.props.hackstats.hacks[m],d=Math.max(x.level,x.goal);return{...x,level:d,goal:d}});this.handleButtonChange({target:{value:i}},"hacks")},children:"Complete All"})})]},"summary-max")),b})()})]})})]})})}}export{$e as default};
